


 
<!-- 移动手机  tab1短信 tab2声讯-->
  <div class="main-content">
    <!-- 业务支持对象，提示1 -->
    <div class="payfo-method phone">使用中国移动手机付费</div>
    
      <div class="payfo-info">该业务支持中国移动手机用户使用（<em>注册找卡网，绑定支付号码，消费即可积分兑换</em><a href="http://www.zhaoka.com" target="_blank"><em>去绑定</em></a>）</div>
    

    <div class="payfoTab">
      <!-- 选择支付类型 payType -->
      <ul class="tab-hd">
        
          
            <li class="tab-hd-list tabFocus" id="ydsj_tab1">使用短信扣费</li>
          
          
        
          
          
            <li class="tab-hd-list" id="ydsj_tab3">手机验证码支付</li>
          
        
          
          
            <li class="tab-hd-list" id="ydsj_tab2">使用声讯扣费</li>
          
        
      </ul>

      <!-- 支付类型内容展现  payTypeContent -->
      <ul class="tab-content">
        <li class="tab-content-list" id='ydsj_con1'><!-- 短信支付 li -->
          <div class="form-wrap">
            <form id="ydsjsmsForm" name="ydsjsmsForm" action="" method="post" onsubmit="return false;">
              <div class="field">
                  
                <ul id="ydsj_sms_cashTab" class="cashTab">
                  
                    
                      <li class="checked">
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con1_1" checked="checked" />
                        <label for="ydsj_cashRadio_con1_1">大额（按次扣费）</label>
                      </li>
                    
                    
                  
                    
                    
                      <li>
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con1_6" />
                        <label for="ydsj_cashRadio_con1_6">大额2（按次扣费）</label>
                        
                      </li> 
                    
                  
                  </ul>
                  
                  
              </div>
              <div class="field">
                <label class="label">请输入您的手机号：</label>
                <div class="inputBox">
                  <input id="con1phone1" name="con1phone1" class="text" type="text" maxlength="11" value="" />
                  <span id="spancon1phone1" class="form-tips"></span>
                </div>
              </div>
              <div class="field">
                <div class="btn-next">
                  <input class="btn" type="submit" id="ydsjbtnCon1FormSubmit" value="下一步" />
                  <a name="goBackStep1" style="cursor: pointer;">上一步</a>
                </div>
              </div>
            </form>
            <!-- 支付类型介绍 -->
            
            
            <ul class="info-txt" >
              <li>
                <span class="info-ti">扣费介绍：</span>
                <span name="feeModelIntroduce"></span>
              </li>
              <li>
                <span class="info-ti">开通地区：</span>
                <span name="area" ></span>
              </li>
                <li style="display: none" id="wenxintishi">
                <span class="info-ti">温馨提示：</span>
                <span name="wenxintishi" >
                  <p>1、以上操作需在<span style="color:#e53333;">30</span>分钟内进行，过期需重新提交；</p>
                  <p>2、如您付费成功后长时间未获得点卡或充值，请登录&nbsp;<a href="http://www.zhaoka.com">www.zhaoka.com</a>进行验证或联系客服处理；</p>
                  <p>3、部分用户订购相关产品后24小时内，可能会收到10086“*元/月”的短信提醒，但不影响产品使用，无后续费用，如有疑问，请拨打客服电话咨询。</p>
                </span>
              </li>
            </ul>
            
          </div>
        </li>
        
        <li class="tab-content-list" id="ydsj_con2"><!-- 声讯支付 li -->
          <div class="form-wrap">
            <form id="ydsjsxForm" name="ydsjsxForm" action="" method="post">
              <div class="field">
                
                
                  <ul id="ydsj_sx_cashTab" class="cashTab" style="display: none">
                  <li>
                    <input style="display: none" type="radio" name="cashRadio" id="ydsj_cashRadio_con2_2" checked="checked" />
                  </li>
                  </ul>
                
              </div>
              <div class="field">
                <label class="label">请输入您的手机号：</label>
                <div class="inputBox">
                  <input id="con2phone1" name="con2phone1" class="text" type="text" maxlength="11" value="" />
                  <span id="spancon2phone1" class="form-tips"></span>
                </div>
              </div>
              <div class="field">
                <div class="btn-next">
                  <input class="btn" type="button" id="ydsjbtnCon2FormSubmit" value="下一步" />
                  <a name="goBackStep1" style="cursor: pointer;">上一步</a>
                </div>
              </div>
            </form>
            <!-- 支付类型介绍 -->
            <ul class="info-txt" >
              <li>
                <span class="info-ti">扣费介绍：</span>
                <span name="feeModelIntroduce"></span>
              </li>
              <li>
                <span class="info-ti">开通地区：</span>
                <span name="area" ></span>
              </li>
            </ul>
          </div>
        </li>
        
        <li class="tab-content-list" id="ydsj_con3"><!-- 手机验证码支付 li -->
          <div class="form-wrap">
            <form id="ydsjyzmForm" name="ydsjyzmForm" action="" method="post">
              <div class="field">
                
                <ul id="ydsj_yzm_cashTab" class="cashTab">
                  
                    
                      <li class="checked">
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con3_1" checked="checked" />
                        <label for="cashRadio_con3_1">手机验证码支付1
                          
                        </label>
                      </li>
                    
                    
                  
                    
                    
                      <li>
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con3_15" />
                        <label for="cashRadio_con3_15">手机验证码支付2
                          
                            <div style="background:url(images/tj.jpg) no-repeat 0 0; width:201px; height:21px; position:absolute; top:-13px; left:50px;" />
                          
                        </label>
                      </li>
                    
                  
                    
                    
                      <li>
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con3_5" />
                        <label for="cashRadio_con3_5">手机验证码支付3
                          
                            <div style="background:url(images/tj.jpg) no-repeat 0 0; width:201px; height:21px; position:absolute; top:-13px; left:50px;" />
                          
                        </label>
                      </li>
                    
                  
                    
                    
                      <li>
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con3_18" />
                        <label for="cashRadio_con3_18">手机验证码支付4
                          
                        </label>
                      </li>
                    
                  
                    
                    
                      <li>
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con3_19" />
                        <label for="cashRadio_con3_19">手机验证码支付5
                          
                        </label>
                      </li>
                    
                  
                    
                    
                      <li>
                        <input type="radio" name="cashRadio" id="ydsj_cashRadio_con3_20" />
                        <label for="cashRadio_con3_20">手机验证码支付6
                          
                        </label>
                      </li>
                    
                  
                </ul>
                
                
              </div>
              <div class="field">
                <label class="label">请输入您的手机号：</label>
                <div class="inputBox">
                  <input id="con3phone1" name="con3phone1" class="text" type="text" maxlength="11" value="" />
                  <span id="spancon3phone1" class="form-tips"></span>
                </div>
              </div>
              <div class="field">
                <div class="btn-next">
                  <input class="btn" type="button" id="ydsjbtnCon3FormSubmit" value="下一步" />
                  <a name="goBackStep1" style="cursor: pointer;">上一步</a>
                </div>
              </div>
            </form>
            <!-- 支付类型介绍 -->
            <ul class="info-txt" >
              <li>
                <span class="info-ti">扣费介绍：</span>
                <span name="feeModelIntroduce"></span>
              </li>
              <li>
                <span class="info-ti">开通地区：</span>
                <span name="area" ></span>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    <!-- 支付方式友情提示 -->
    <dl class="tips">
    
    </dl>
  </div>

<script type="text/javascript">

$(document).ready(function(){
  if(payPhone){
    if($("input[name$='phone1']").length>0){
      $("input[name$='phone1']").val(payPhone);
    }
  }
  
  //找卡移动页游宣传跳转
  var come = 'zhaoka_ydyy';
  if(come=='zhaoka_ydyy'&&$("#ydsj_tab3")){
    repayTypeId = 3;
    for(var i=0;i<10;i++){
      if($("#ydsj_tab"+i+"")&&i!=3){
        $("#ydsj_tab"+i+"").remove();
      }
    }
  }
  //找卡上海移动IVR宣传
  if(come=='zhaoka_shivr'&&$("#ydsj_tab2")){
    repayTypeId = 2;
    for(var i=0;i<10;i++){
      if($("#ydsj_tab"+i+"")&&i!=2){
        $("#ydsj_tab"+i+"").remove();
      }
    }
  }
  
  //页面装载时默认选中的支付类型，扣费方式下的开通地区
  if(repayTypeId){
    $("#ydsj_tab"+repayTypeId+"").addClass("tabFocus").siblings().removeClass("tabFocus");
  }
  if(refeeModelId){
    $("#ydsj_cashRadio_con"+repayTypeId+"_"+refeeModelId+"").attr("checked",true);
    $("#ydsj_cashRadio_con"+repayTypeId+"_"+refeeModelId+"").parent().addClass("checked").siblings().removeClass("checked");
  }
  if($(".tab-hd-list.tabFocus").attr("id")){
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");
    //根据选中的字符类型选定显示的li
    $("#ydsj_con"+payTypeId+"").addClass("conFocus");
    var prodId = $("#prodId").val();
    var feeModelId = $(".tab-content-list.conFocus input:checked").attr("id");
    feeModelId = getFeeMoudel($(".tab-content-list.conFocus input:checked").attr("id"));//getLastChar($(".tab-content-list.conFocus input:checked").attr("id"));
    //alert(payModelId+"----"+payTypeId+"----"+prodId+"----"+feeModelId+"----"+$(".tab-content-list.conFocus").attr("id"));
    getAreaForFeeModel(payModelId,payTypeId,feeModelId,prodId,""+$(".tab-content-list.conFocus").attr("id")+"");
  }
  
  //支付类型点击事件触发css修改
  $(".tab-hd-list").each(function(){
      $(this).click(function(){
        var phoneVal = $("li.tab-content-list.conFocus input[id^='con']").val();
          $(this).addClass("tabFocus").siblings().removeClass("tabFocus");
          var index = $(this).attr("id");
          index = index.replace("tab","con");
          $("#"+index+"").show().addClass("conFocus").siblings().removeClass("conFocus").hide();
          $("li.tab-content-list.conFocus input[id^='con']").val(phoneVal);
      });
  });
  
  //修改支付类型，查询开通地区
  $(".tab-hd li").bind("click",function(){
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");
    var payTypeId = $(this).attr("id").replace("ydsj_tab","");
    var prodId = $("#prodId").val();
    var feeModelId = getFeeMoudel($(".tab-content-list.conFocus input:checked").attr("id")); //getLastChar($(".tab-content-list.conFocus input:checked").attr("id"));
    //alert(payModelId+"----"+payTypeId+"----"+prodId+"----"+feeModelId);
    getAreaForFeeModel(payModelId,payTypeId,feeModelId,prodId,""+$(".tab-content-list.conFocus").attr("id")+"");
  });
  
  //短信表单下选择扣费方式对应的开通地区
  $("#ydsj_sms_cashTab input").bind("click",function(){
    $(this).parent().addClass("checked").siblings().removeClass("checked");
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");
    var feeModelId = getFeeMoudel($(this).attr("id"));//getLastChar($(this).attr("id"));
    var prodId = $("#prodId").val();
    //alert(payModelId+"----"+payTypeId+"----"+prodId+"----"+feeModelId);
    getAreaForFeeModel(payModelId,payTypeId,feeModelId,prodId,"ydsj_con1");
  });
  
  //声讯表单下选择扣费方式对应的开通地区
  $("#ydsj_sx_cashTab input").bind("click",function(){
    $(this).parent().addClass("checked").siblings().removeClass("checked");
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");
    var feeModelId = getFeeMoudel($(this).attr("id"));//getLastChar($(this).attr("id"));
    var prodId = $("#prodId").val();
    //alert(payModelId+"----"+payTypeId+"----"+prodId+"----"+feeModelId);
    getAreaForFeeModel(payModelId,payTypeId,feeModelId,prodId,"ydsj_con2");
  });
  
  //验证码表单下选择扣费方式对应的开通地区
  $("#ydsj_yzm_cashTab input").bind("click",function(){
    $(this).parent().addClass("checked").siblings().removeClass("checked");
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");
    var feeModelId = getFeeMoudel($(this).attr("id"));//getLastChar($(this).attr("id"));
    var prodId = $("#prodId").val();
    //alert(payModelId+"----"+payTypeId+"----"+prodId+"----"+feeModelId);
    getAreaForFeeModel(payModelId,payTypeId,feeModelId,prodId,"ydsj_con3");
  });
  
  //短信页面提交
  $("#ydsjbtnCon1FormSubmit").click(function(){
    $(this).val("处理中...").addClass("disbtn").attr("disabled","disabled");
    ydsjSmsFormSubmit();
  });
/*$("#ydsjsmsForm").submit(function(){
  alert(123);
  var params = $("#params").val(); //加密参数
    var prodId = $("#prodId").val(); //产品id
    var phone = $("#con1phone1").val(); //电话号码
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");//支付方式id
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");//支付类型id
    var feeModelId = $("#ydsj_sms_cashTab input:checked").attr("id").replace("ydsj_cashRadio_con1_","");//扣费方式id
    var oneTag = $("#oneTag").val(); 
    var gkModel = "1";
    var phoneId = "con1phone1";
  //alert("prodId"+prodId+"--phone"+phone+"--payModelId"+payModelId+"--payTypeId"+payTypeId+"--feeModelId"+feeModelId+"--oneTag"+oneTag+"--phoneId"+phoneId);
  jQuery.ajax({
            url: "SubmitAction",   // 提交的页面
            data: {"params":params,
                "prodId":prodId,
                "phone":phone,
                "payModelId":payModelId,
                "payTypeId":payTypeId,
                "feeModelId":feeModelId,
                "oneTag":oneTag,
                "gkModel":gkModel}, // 从表单中获取数据
            type: "POST",                   // 设置请求类型为"POST"，默认为"GET"
            dataType:"json",
            async:false,
            beforeSend: function()          // 设置表单提交前方法
            {
                if(checkPhone(""+phoneId+"") == false){
                  $("input.btn").val("下一步").removeClass("disbtn").removeAttr("disabled");
          return false;
        }
            },
            error: function(request) {      // 设置表单提交出错      
                dialogShow("表单提交出错，请稍候再试!");
                $("input.btn").val("下一步").removeClass("disbtn").removeAttr("disabled");
                return false;
            },
            success: function(data) {
                doData(data);
            }
        });
    return false;
});*/

  $("#con1phone1").keypress(function(e) {
    if (e.which == 13) {
      $("#ydsjsmsForm").submit(function(){return false;});
      ydsjSmsFormSubmit();
    }
  });
  
  //声讯页面提交
  $("#ydsjbtnCon2FormSubmit").click(function(){
    $(this).val("处理中...").addClass("disbtn").attr("disabled","disabled");
    ydsjSxFormSubmit();
  });
  $("#con2phone1").keypress(function(e) {
    if (e.which == 13) {
      $("#ydsjsxForm").submit(function(){return false;});
      ydsjSxFormSubmit();
    }
  });
  
  //验证码页面提交
  $("#ydsjbtnCon3FormSubmit").click(function(){
    $(this).val("处理中...").addClass("disbtn").attr("disabled","disabled");
    ydsjYzmFormSubmit();
  });
  $("#con3phone1").keypress(function(e) {
    if (e.which == 13) {
      $("#ydsjyzmForm").submit(function(){return false;});
      ydsjYzmFormSubmit();
    }
  });
  function ydsjSxFormSubmit(){
    var params = $("#params").val(); //加密参数
    var prodId = $("#prodId").val(); //产品id
    var phone = $("#con2phone1").val(); //电话号码
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");//支付方式id
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");//支付类型id
    var feeModelId = $("#ydsj_sx_cashTab input:checked").attr("id").replace("ydsj_cashRadio_con2_","");//扣费方式id
    var oneTag = $("#oneTag").val(); 
    var gkModel = "1";
    var phoneId = "con2phone1";
    //alert("ydsjbtnCon2FormSubmit===="+prodId+"----"+prodId+"----"+phone+"----"+payModelId+"----"+payTypeId+"----"+feeModelId);
        step2formSubmit(params,prodId,phone,payModelId,payTypeId,feeModelId,oneTag,gkModel,phoneId);
  }

  function ydsjSmsFormSubmit(){
    var params = $("#params").val(); //加密参数
    var prodId = $("#prodId").val(); //产品id
    var phone = $("#con1phone1").val(); //电话号码
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");//支付方式id
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");//支付类型id
    var feeModelId = $("#ydsj_sms_cashTab input:checked").attr("id").replace("ydsj_cashRadio_con1_","");//扣费方式id
    var oneTag = $("#oneTag").val(); 
    var gkModel = "1";
    var phoneId = "con1phone1";
    //alert("ydsjbtnCon1FormSubmit==="+prodId+"----"+prodId+"----"+phone+"----"+payModelId+"----"+payTypeId+"----"+feeModelId);
        step2formSubmit(params,prodId,phone,payModelId,payTypeId,feeModelId,oneTag,gkModel,phoneId);
  }
  
  function ydsjYzmFormSubmit(){
    var params = $("#params").val(); //加密参数
    var prodId = $("#prodId").val(); //产品id
    var phone = $("#con3phone1").val(); //电话号码
    var payModelId = $(".list-item.curr").attr("id").replace("payModelId","");//支付方式id
    var payTypeId = $(".tab-hd-list.tabFocus").attr("id").replace("ydsj_tab","");//支付类型id
    var feeModelId = $("#ydsj_yzm_cashTab input:checked").attr("id").replace("ydsj_cashRadio_con3_","");//扣费方式id
    var oneTag = $("#oneTag").val(); 
    var gkModel = "1";
    var phoneId = "con3phone1";
    //alert("ydsjbtnCon1FormSubmit==="+prodId+"----"+prodId+"----"+phone+"----"+payModelId+"----"+payTypeId+"----"+feeModelId);
        step2formSubmit(params,prodId,phone,payModelId,payTypeId,feeModelId,oneTag,gkModel,phoneId);
  }
});

function getFeeMoudel(str){
  var a = str.lastIndexOf("_"); 
  return str.substr(a+1,str.length);
}
</script>